webpackJsonp([1],{"/oEN":function(t,e,r){const s=r("zp3n"),n=r("t3J9"),i=r("GRuZ");t.exports=class{constructor(t,e){const{token:r,endpoint:n}=s.extractTokenAndApiEndpoint(t);if(this.token=r,this.endpoint=n,this.options={},this.options.chunkSize=1e3,this._deltaTime={value:0,weight:0},!e instanceof o)throw new Error("Invalid service param");this._service=e}get service(){return this._service?this._service:(this._service=new o(this.endpoint+"service/info"),this._service)}async username(){return(await this.accessInfo()).user.username}async accessInfo(){return this.get("access-info",null)}async api(t,e){return await this._chunkedBatchCall(t,e,function(t){return this.post("",t)}.bind(this))}async _chunkedBatchCall(t,e,r){if(!Array.isArray(t))throw new Error("Pryv.api() takes an array as input");const s=[];let n=0;for(let i=0;t.length>=i;i+=this.options.chunkSize){const o=[],a=Math.min(i+this.options.chunkSize,t.length);for(let e=i;e<a;e++)o.push({method:t[e].method,params:t[e].params});const c=await r(o);if(!c||!Array.isArray(c.results))throw new Error("API call result is not an Array: "+JSON.stringify(c));if(c.results.length!=o.length)throw new Error("API call result Array does not match request: "+JSON.stringify(c));for(let e=0;e<c.results.length;e++)t[e+i].handleResult&&await t[e+i].handleResult.call(null,c.results[e]);Array.prototype.push.apply(s,c.results),n=Math.round(100*s.length/t.length),e&&e(n,s)}return s}async post(t,e,r){const s=Date.now()/1e3,n=await this.postRaw(t,e,r);return this._handleMeta(n.body,s),n.body}async postRaw(t,e,r){return this._post(t).query(r).send(e)}_post(t){return s.superagent.post(this.endpoint+t).set("Authorization",this.token).set("accept","json")}async get(t,e){const r=Date.now()/1e3,s=await this.getRaw(t,e);return this._handleMeta(s.body,r),s.body}getRaw(t,e){return t=t||"",s.superagent.get(this.endpoint+t).set("Authorization",this.token).set("accept","json").query(e)}async addPointsToHFEvent(t,e,r){const s=await this.post("events/"+t+"/series",{format:"flatJSON",fields:e,points:r});if("ok"===!s.status)throw new Error("Failed loading serie: "+JSON.stringify(s.status));return s}async getEventsStreamed(t,e){const r=n(e,t.includeDeletions);let s=null;"undefined"==typeof window?s=await this.getRaw("events",t).buffer(!1).parse(r):"undefined"!=typeof fetch?s=await i(this,t,r):(console.log("WARNING: Browser does not support fetch() required by Pryv.Connection.getEventsStreamed()"),(s=await this.getRaw("events",t)).body.eventsCount=0,s.body.events&&(s.body.events.forEach(e),s.body.eventsCount+=s.body.events.length,delete s.body.events),s.body.eventDeletions&&(s.body.eventDeletions.forEach(e),s.body.eventsCount+=s.body.eventDeletions.length,delete s.body.eventDeletions));const o=Date.now()/1e3;return this._handleMeta(s.body,o),s.body}async createEventWithFile(t,e){const r=await this._post("events").field("event",JSON.stringify(t)).attach("file",e),s=Date.now()/1e3;return this._handleMeta(r.body,s),r.body}async createEventWithFormData(t,e){return e.append("event",JSON.stringify(t)),(await this._post("events").send(e)).body}get deltaTime(){return this._deltaTime.value}get apiEndpoint(){return s.buildPryvApiEndpoint(this)}_handleMeta(t,e){if(!t.meta)throw new Error("Cannot find .meta in response.");if(!t.meta.serverTime)throw new Error("Cannot find .meta.serverTime in response.");this._deltaTime.value=(this._deltaTime.value*this._deltaTime.weight+t.meta.serverTime-e)/++this._deltaTime.weight}};const o=r("OkFM")},"0/y9":function(t,e,r){"use strict";var s=r("b9ne");function n(t){if(t)return function(t){for(var e in n.prototype)Object.prototype.hasOwnProperty.call(n.prototype,e)&&(t[e]=n.prototype[e]);return t}(t)}t.exports=n,n.prototype.get=function(t){return this.header[t.toLowerCase()]},n.prototype._setHeaderProperties=function(t){var e=t["content-type"]||"";this.type=s.type(e);var r=s.params(e);for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(this[n]=r[n]);this.links={};try{t.link&&(this.links=s.parseLinks(t.link))}catch(t){}},n.prototype._setStatusProperties=function(t){var e=t/100|0;this.statusCode=t,this.status=this.statusCode,this.statusType=e,this.info=1===e,this.ok=2===e,this.redirect=3===e,this.clientError=4===e,this.serverError=5===e,this.error=(4===e||5===e)&&this.toError(),this.created=201===t,this.accepted=202===t,this.noContent=204===t,this.badRequest=400===t,this.unauthorized=401===t,this.notAcceptable=406===t,this.forbidden=403===t,this.notFound=404===t,this.unprocessableEntity=422===t}},"0zZN":function(t,e,r){const s=r("upOG"),n=r("kZww"),i=r("udG1"),o=r("OkFM");t.exports={setupAuth:async function(t,e,r,s=i){const n=new o(e,r);await n.info();const a=new s(t,n);return await a.init(),n},AuthStates:n,AuthController:s}},"1yTK":function(t,e){t.exports={name:"pryv",version:"2.1.1",homepage:"https://github.com/pryv/lib-js",description:"Pryv Javascript Library",keywords:["Pryv"],repository:{type:"git",url:"git://github.com/pryv/lib-js"},bugs:{url:"https://github.com/pryv/lib-js/issues"},author:{name:"Pryv S.A."},main:"src/index.js",license:"BSD-3-Clause",scripts:{setup:"./scripts/setup-environment-dev.sh",build:"webpack --config webpack.config.js",doc:"node node_modules/jsdoc/jsdoc.js -c .jsdoc-conf.json",test:"mocha --reporter spec  test/**/*.test.js --timeout 3000","test-debug":"mocha --inpect-brk=40000 --reporter spec  test/**/*.test.js ","test:browser":"npm run build; ",cover:"nyc npm run test && npm run cover:report","cover:report":"nyc report --reporter=lcov --reporter=html",webserver:"./node_modules/.bin/rec-la ./dist 9443","gh-pages":"./scripts/upload.sh",clear:"rm -r dist/ && npm run setup"},contributors:[{name:"Pierre-Mikael Legris",email:"perki@pryv.com"}],dependencies:{superagent:"^5.2.2"},devDependencies:{"@pryv/lib-js-common":"git+https://github.com/pryv/lib-js-common.git#1.0.1","@pryv/monitor":"^1.0.0","@pryv/socket.io":"^1.0.1",chai:"^4.2.0","chai-as-promised":"^7.1.1",cuid:"^2.1.8",jsdoc:"^3.6.4",mocha:"^6.2.3","node-fetch":"^2.6.0",nyc:"^14.1.1","rec-la":"^0.1.16","universal-url":"^2.0.0",zombie:"^6.1.4"}}},"4lvf":function(t,e){t.exports={basePath:"access",pages:{index:"/index.html",auth:"/access.html",register:"/register.html",reset:"/reset-password.html",signin:"/signinhub.html",changepass:"/change-password.html"}}},"7zck":function(t,e){},"B4C/":function(t,e,r){function s(t){if(t)return function(t){for(var e in s.prototype)t[e]=s.prototype[e];return t}(t)}t.exports=s,s.prototype.on=s.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},s.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var r,s=this._callbacks["$"+t];if(!s)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<s.length;n++)if((r=s[n])===e||r.fn===e){s.splice(n,1);break}return 0===s.length&&delete this._callbacks["$"+t],this},s.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),r=this._callbacks["$"+t],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(r){s=0;for(var n=(r=r.slice(0)).length;s<n;++s)r[s].apply(this,e)}return this},s.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},s.prototype.hasListeners=function(t){return!!this.listeners(t).length}},GRuZ:function(t,e){t.exports=async function(t,e,r){const s={ondata:null,onend:null,encoding:"utf8"},n={setEncoding:function(t){s.encoding=t},on:function(t,e){s["on"+t]=e}};let i,o;r(n,function(t,e){i=t,o=e});let a=new URL(t.endpoint+"events");a.search=new URLSearchParams(e);let c={method:"GET",headers:{Accept:"application/jon"}};t.token&&(c.headers.Authorization=t.token);let u=await fetch(a,c);const l=u.body.getReader();for(;;){const{done:t,value:e}=await l.read();if(s.ondata(new TextDecoder(s.encoding).decode(e)),t){s.onend();break}}if(i)throw new Error(i);const p={text:n.text,body:o,statusCode:u.status,headers:{}};for(var h of u.headers.entries())p.headers[h[0]]=h[1];return p}},IA4a:function(t,e,r){"use strict";function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t.exports=function(t){return null!==t&&"object"===s(t)}},IpiD:function(t,e,r){"use strict";function s(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,s=new Array(e);r<e;r++)s[r]=t[r];return s}function i(){this._defaults=[]}["use","on","once","set","query","type","accept","auth","withCredentials","sortQuery","retry","ok","redirects","timeout","buffer","serialize","parse","ca","key","pfx","cert","disableTLSCerts"].forEach(function(t){i.prototype[t]=function(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return this._defaults.push({fn:t,args:r}),this}}),i.prototype._setDefaults=function(t){this._defaults.forEach(function(e){t[e.fn].apply(t,s(e.args))})},t.exports=i},NHnr:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=r("7+uW"),n=r("Xxa5"),i=r.n(n),o=r("exGp"),a=r.n(o),c=r("Zrlr"),u=r.n(c),l=r("wxAW"),p=r.n(l),h=r("hApR"),d=r.n(h),f=function(){function t(e){var r=this;u()(this,t),this.selection=[];var s=e.regions;Object.keys(s).forEach(function(t){var e=s[t].zones;Object.keys(e).forEach(function(t){var s=e[t].hostings;Object.keys(s).forEach(function(t){var e=s[t],n=e.name||t;null!=e.description&&(n=n+" ("+e.description+")"),r.selection.push({value:t,text:n,description:e.description,availableCore:e.availableCore})})})})}return p()(t,[{key:"getSelection",value:function(){return this.selection}}]),t}(),m=r("UZ5h");function v(t,e){for(var r=t.split("."),s=e.split("."),n=0;n<r.length;++n){if(r[n]!==s[n])return r[n]>s[n];if(s.length===n+1)return!0}return!1}d.a.Service.prototype.apiEndpointForSync=function(t,e){return d.a.Service.buildAPIEndpoint(this.infoSync(),t,e)},d.a.Service.prototype.mfaChallenge=function(){var t=a()(i.a.mark(function t(e,r){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.utils.superagent.post(this.apiEndpointForSync(e)+"mfa/challenge").set("accept","json").set("Authorization",r).send({});case 2:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),d.a.Service.prototype.mfaVerify=function(){var t=a()(i.a.mark(function t(e,r,s){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.utils.superagent.post(this.apiEndpointForSync(e)+"mfa/verify").set("accept","json").set("Authorization",r).send({code:s});case 2:return n=t.sent,t.abrupt("return",n.body.token);case 4:case"end":return t.stop()}},t,this)}));return function(e,r,s){return t.apply(this,arguments)}}(),d.a.Service.prototype.checkAppAccess=function(){var t=a()(i.a.mark(function t(e,r,s){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.utils.superagent.post(this.apiEndpointForSync(e)+"accesses/check-app").set("accept","json").set("Authorization",r).send(s);case 2:return n=t.sent,t.abrupt("return",n.body);case 4:case"end":return t.stop()}},t,this)}));return function(e,r,s){return t.apply(this,arguments)}}(),d.a.Service.prototype.createAppAccess=function(){var t=a()(i.a.mark(function t(e,r,s){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.utils.superagent.post(this.apiEndpointForSync(e)+"accesses").set("accept","json").set("Authorization",r).send(s);case 2:return n=t.sent,t.abrupt("return",n.body.access);case 4:case"end":return t.stop()}},t,this)}));return function(e,r,s){return t.apply(this,arguments)}}(),d.a.Service.prototype.deleteAppAccess=function(){var t=a()(i.a.mark(function t(e,r,s){var n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.utils.superagent.delete(this.apiEndpointForSync(e)+"accesses/"+s).set("accept","json").set("Authorization",r).send({id:s});case 2:return n=t.sent,t.abrupt("return",n.body.accessDeletion);case 4:case"end":return t.stop()}},t,this)}));return function(e,r,s){return t.apply(this,arguments)}}(),d.a.Service.prototype.getAvailableHostings=function(){var t=a()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.utils.superagent.get(this.infoSync().register+"hostings").set("accept","json");case 2:return e=t.sent,t.abrupt("return",new f(e.body));case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),d.a.Service.prototype.createUser=function(){var t=a()(i.a.mark(function t(e,r,s,n,o,a,c,u,l){var p,h;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(p=this.infoSync().version,h=void 0,!p||!v(p,"1.6.0")){t.next=8;break}return t.next=5,d.a.utils.superagent.post(m.resolve(e,"users")).set("accept","json").send({appId:c,username:r,password:s,email:n,hosting:o,language:a||"en",invitationToken:u||"enjoy",referer:l});case 5:h=t.sent,t.next=11;break;case 8:return t.next=10,d.a.utils.superagent.post(this.infoSync().register+"user").set("accept","json").send({appid:c,username:r,password:s,email:n,hosting:o,languageCode:a||"en",invitationtoken:u||"enjoy",referer:l});case 10:h=t.sent;case 11:return t.abrupt("return",h.body);case 12:case"end":return t.stop()}},t,this)}));return function(e,r,s,n,i,o,a,c,u){return t.apply(this,arguments)}}(),d.a.Service.prototype.checkUsernameExistence=function(){var t=a()(i.a.mark(function t(e){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.utils.superagent.post(this.infoSync().register+e+"/server").set("accept","json").send({});case 2:return r=t.sent,t.abrupt("return",r.body.server);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),d.a.Service.prototype.getUsernameForEmail=function(){var t=a()(i.a.mark(function t(e){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.search("@")<0)){t.next=2;break}return t.abrupt("return",e);case 2:return t.next=4,d.a.utils.superagent.get(this.infoSync().register+e+"/uid").set("accept","json");case 4:return r=t.sent,t.abrupt("return",r.body.uid);case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),d.a.Service.prototype.requestPasswordReset=function(){var t=a()(i.a.mark(function t(e,r){var s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.utils.superagent.post(this.apiEndpointForSync(e)+"account/request-password-reset").set("accept","json").send({appId:r,username:e});case 2:return s=t.sent,t.abrupt("return",s.status);case 4:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),d.a.Service.prototype.resetPassword=function(){var t=a()(i.a.mark(function t(e,r,s,n){var o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.utils.superagent.post(this.apiEndpointForSync(e)+"account/reset-password").set("accept","json").send({username:e,newPassword:r,appId:n,resetToken:s});case 2:return o=t.sent,t.abrupt("return",o.status);case 4:case"end":return t.stop()}},t,this)}));return function(e,r,s,n){return t.apply(this,arguments)}}(),d.a.Service.prototype.changePassword=function(){var t=a()(i.a.mark(function t(e,r,s,n){var o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.utils.superagent.post(this.apiEndpointForSync(e)+"account/change-password").set("accept","json").set("Authorization",n).send({oldPassword:r,newPassword:s});case 2:return o=t.sent,t.abrupt("return",o.status);case 4:case"end":return t.stop()}},t,this)}));return function(e,r,s,n){return t.apply(this,arguments)}}(),d.a.Service.prototype.loginWithThrow=function(){var t=a()(i.a.mark(function t(e,r,s,n){var o,a,c,u,l;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.apiEndpointFor(e);case 2:if(o=t.sent,t.prev=3,a={accept:"json"},t.t0=n,t.t0){t.next=10;break}return t.next=9,this.info();case 9:t.t0=t.sent.register;case 10:return n=t.t0,d.a.utils.isBrowser()||(a.Origin=n),t.next=14,d.a.utils.superagent.post(o+"auth/login").set(a).send({username:e,password:r,appId:s});case 14:if((c=t.sent).body.token){t.next=17;break}throw new Error("Invalid login response: "+c.body);case 17:return t.t1=d.a.Connection,t.t2=d.a.Service,t.next=21,this.info();case 21:return t.t3=t.sent,t.t4=e,t.t5=c.body.token,t.t6=t.t2.buildAPIEndpoint.call(t.t2,t.t3,t.t4,t.t5),t.t7=this,t.abrupt("return",new t.t1(t.t6,t.t7));case 29:if(t.prev=29,t.t8=t.catch(3),!(t.t8.response&&t.t8.response.body&&t.t8.response.body)){t.next=39;break}if(!(u=t.t8.response.body).error||!u.error.message){t.next=35;break}throw new Error(u.error.message);case 35:if(!u.mfaToken){t.next=39;break}throw(l=new Error).mfaToken=u.mfaToken,l;case 39:case"end":return t.stop()}},t,this,[[3,29]])}));return function(e,r,s,n){return t.apply(this,arguments)}}();var y=r("Zthf"),g=r.n(y),w=r("M4fF"),b=r.n(w);var _=function(){function t(e){if(u()(this,t),this.language=e.lang||"en",this.appId="pryv-app-web-auth-3",this.pollUrl=e.poll||e.pollUrl,null!=e&&null!=e.oauthState&&(this.accessState={oaccessState:e.oauthState}),this.isAccessRequest())this.pryvService=new d.a.Service;else{var r=e.pryvServiceInfoUrl||function(){if(g.a.DNSLess)return new URL("/reg/service/info",window.location.href).href;return"https://reg."+(location.hostname.split(".").slice(1).join(".")||"pryv.me")+"/service/info"}();this.pryvService=new d.a.Service(r)}this.user={username:"",personalToken:"",mfaToken:""},this.checkAppResult={},this.initialized=!1}return p()(t,[{key:"init",value:function(){var t=a()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.initialized){t.next=2;break}return t.abrupt("return");case 2:if(this.initialized=!1,!this.isAccessRequest()){t.next=7;break}return t.next=6,this.loadAccessState();case 6:this.pryvService.setServiceInfo(this.accessState.serviceInfo);case 7:return t.next=9,this.pryvService.info();case 9:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"isAccessRequest",value:function(){return this.pollUrl}},{key:"loadAccessState",value:function(){var t=a()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.utils.superagent.get(this.pollUrl).set("accept","json");case 3:return e=t.sent,this.accessState=b.a.merge(this.accessState,e.body),t.abrupt("return",this.accessState);case 8:throw t.prev=8,t.t0=t.catch(0),console.log(t.t0),new Error("Invalid data from Access server");case 12:case"end":return t.stop()}},t,this,[[0,8]])}));return function(){return t.apply(this,arguments)}}()},{key:"updateAccessState",value:function(){var t=a()(i.a.mark(function t(e){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.accessState&&this.accessState.returnURL&&(e.returnURL=this.accessState.returnURL),t.next=3,d.a.utils.superagent.post(this.pollUrl).send(e);case 3:return r=t.sent,this.accessState=b.a.merge(this.accessState,e),null!=this.accessState.lang&&(this.language=this.accessState.lang),t.abrupt("return",r.status);case 7:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}]),t}(),x={name:"App",data:function(){return{title:"App-web-auth3",logoSrcUrl:null}},errorCaptured:function(t,e,r){alert("[Vue warn]: Unexpected error in "+r+":\n      "+t)},created:function(){var t=a()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.ctx=new _(this.$route.query),t.next=3,this.ctx.init();case 3:return t.next=5,this.ctx.pryvService.assets();case 5:(e=t.sent).setAllDefaults(),this.logoSrcUrl=e.relativeURL(e._assets["app-web-auth3"].logo.url);case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},k={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[this._m(0),this._v(" "),e("v-app",[e("v-content",[e("v-container",[e("img",{attrs:{src:this.logoSrcUrl,height:"50px"}}),this._v(" "),e("router-view")],1)],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("head",[e("title",[this._v("Auth")]),this._v(" "),e("link",{attrs:{href:"https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Material+Icons",rel:"stylesheet"}})])}]};var E=r("VU/8")(x,k,!1,function(t){r("vYrD")},null,null).exports,S=r("/ocq"),A={props:{confirmation:{type:Boolean,default:!1},value:{type:String,default:""},label:{type:String,default:"Password"},id:{type:String,default:"password"}},data:function(){return{visiblePass:!1,repass:"",rules:{required:function(t){return!!t||"Password is required."}}}},computed:{matchPassword:function(){return this.value===this.repass||"Password confirmation does not match."}}},T={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-text-field",{attrs:{id:t.id,value:t.value,appendIcon:t.visiblePass?"lock_open":"lock",type:t.visiblePass?"text":"password",rules:[t.rules.required],label:t.label},on:{input:function(e){return t.$emit("input",e)},"click:append":function(){return t.visiblePass=!t.visiblePass}}}),t._v(" "),t.confirmation?r("v-text-field",{attrs:{id:t.id+"Confirmation",type:t.visiblePass?"text":"password",rules:[t.matchPassword],label:t.label+" confirmation"},model:{value:t.repass,callback:function(e){t.repass=e},expression:"repass"}}):t._e()],1)},staticRenderFns:[]},R=r("VU/8")(A,T,!1,null,null,null).exports,I={props:{errorMsg:{type:String,default:""},successMsg:{type:String,default:""}},computed:{alertMsg:function(){return this.successMsg.length>0?this.successMsg:this.errorMsg.length>0?this.errorMsg:""},alertType:function(){return this.successMsg.length>0?"success":"error"}}},O={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("v-divider",{staticClass:"mt-3 mb-2"}),this._v(" "),e("v-alert",{attrs:{value:this.alertMsg,type:this.alertType,transition:"scale-transition"}},[e("span",{domProps:{innerHTML:this._s(this.alertMsg)}})])],1)},staticRenderFns:[]},P=r("VU/8")(I,O,!1,null,null,null).exports,C=r("Gu7T"),q=r.n(C),U=function(){function t(e){u()(this,t),this.msg=this.parseError(e)}return p()(t,[{key:"parseError",value:function(t){if(console.error(t),"string"==typeof t)return"<b>"+t+"</b>";if(null==t||null==t.response||null==t.response.body)return"<b>"+this.unexpectedError()+"</b>";var e=t.response.body,r=e.error,s="<b>"+this.parseErrorData(r||e)+"</b>",n=r?r.body:e.errors;return s+=this.parseSubErrors(n),r&&r.data&&Array.isArray(r.data)&&(s+=this.parseValidationSubErrors(r.data)),s}},{key:"parseValidationSubErrors",value:function(t){var e="";return null!=t&&Array.isArray(t)&&t.forEach(function(t){e+="<br/>"+t.message}),e}},{key:"parseSubErrors",value:function(t){var e=this,r="";return null!=t&&Array.isArray(t)&&t.forEach(function(t){r+="<br/>"+e.parseErrorData(t)}),r}},{key:"parseErrorData",value:function(t){return t.detail||t.message||this.unexpectedError()}},{key:"unexpectedError",value:function(){return"Unexpected error"}}]),t}(),D=r("d7EF"),F=r.n(D);var N,j=function(t){var e=t.accessState.returnURL;if(null!=e&&"false"!==e&&e){if(e.endsWith("?")||(e+="?"),t.accessState.oaccessState){var r="";t.accessState.key&&(r="&code="+t.accessState.key),e+="state="+t.accessState.oaccessState+r+"&poll="+t.pollUrl}else{e+="prYvpoll="+t.pollUrl;var s=!0,n=!1,i=void 0;try{for(var o,a=Object.entries(t.accessState)[Symbol.iterator]();!(s=(o=a.next()).done);s=!0){var c=o.value,u=F()(c,2),l=u[0],p=u[1];"string"!=typeof p&&"number"!=typeof p||(e+="&prYv"+l+"="+p)}}catch(t){n=!0,i=t}finally{try{!s&&a.return&&a.return()}finally{if(n)throw i}}}location.href=e}else window.close()},L=(N=a()(i.a.mark(function t(e){var r,s,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.checkAppResult.mismatchingAccess){t.next=6;break}return t.next=3,e.pryvService.deleteAppAccess(e.user.username,e.user.personalToken,e.checkAppResult.mismatchingAccess.id);case 3:if(t.sent.id){t.next=6;break}throw new Error("Failed removing existing access");case 6:return r={permissions:e.checkAppResult.checkedPermissions,name:e.accessState.requestingAppId,type:"app"},["deviceName","token","expireAfter","clientData"].forEach(function(t){void 0!==e.accessState[t]&&(r[t]=e.accessState[t])}),t.next=10,e.pryvService.createAppAccess(e.user.username,e.user.personalToken,r);case 10:return s=t.sent,n={status:"ACCEPTED",apiEndpoint:e.pryvService.apiEndpointForSync(e.user.username,s.token),username:e.user.username,token:s.token},t.next=14,e.updateAccessState(n);case 14:j(e);case 15:case"end":return t.stop()}},t,this)})),function(t){return N.apply(this,arguments)}),M=function(){var t=a()(i.a.mark(function t(e){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pryvService.getUsernameForEmail(e.user.username);case 2:return r=e.user.username=t.sent,t.next=5,e.pryvService.checkUsernameExistence(r);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=a()(i.a.mark(function t(e,r,s){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:return t.next=4,e.pryvService.resetPassword(e.user.username,r,s,e.appId);case 4:case"end":return t.stop()}},t,this)}));return function(e,r,s){return t.apply(this,arguments)}}(),B=function(){var t=a()(i.a.mark(function t(e,r,s){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:return t.next=4,e.pryvService.changePassword(e.user.username,r,s,e.user.personalToken);case 4:case"end":return t.stop()}},t,this)}));return function(e,r,s){return t.apply(this,arguments)}}(),H=function(){var t=a()(i.a.mark(function t(e,r){var s,n,o;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return s={},["requestingAppId","requestedPermissions","deviceName","token","expireAfter","clientData"].forEach(function(t){void 0!==e.accessState[t]&&(s[t]=e.accessState[t])}),t.next=4,e.pryvService.checkAppAccess(e.user.username,e.user.personalToken,s);case 4:if(null==(n=t.sent).matchingAccess){t.next=10;break}return o={status:"ACCEPTED",apiEndpoint:e.pryvService.apiEndpointForSync(e.user.username,n.matchingAccess.token),username:e.user.username,token:n.matchingAccess.token},t.next=9,e.updateAccessState(o);case 9:return t.abrupt("return",j(e));case 10:null!=n.checkedPermissions&&(e.accessState.requestedPermissions=n.checkedPermissions),e.checkAppResult=n,r();case 13:case"end":return t.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}(),G=function(){var t=a()(i.a.mark(function t(e,r,s,n,o){var a,c;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=null,e.accessState&&(a=e.accessState.referer||e.accessState.requestingAppId),t.next=5,e.pryvService.createUser(r,e.user.username,s,n,o,e.language,e.appId,null,a);case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}},t,this)}));return function(e,r,s,n,i){return t.apply(this,arguments)}}(),$=function(){var t=a()(i.a.mark(function t(e){var r,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pryvService.getAvailableHostings();case 2:return r=t.sent,s=r.getSelection(),t.abrupt("return",s);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),V=function(){var t=a()(i.a.mark(function t(e,r){var s,n,o,a;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.accessState||"NEED_SIGNIN"===e.accessState.status){t.next=2;break}return t.abrupt("return",j(e));case 2:return t.next=4,M(e);case 4:return s=e.user.username,t.prev=5,t.next=8,e.pryvService.loginWithThrow(s,r,e.appId);case 8:n=t.sent,e.user.personalToken=n.token||"",t.next=29;break;case 12:if(t.prev=12,t.t0=t.catch(5),null==t.t0.mfaToken){t.next=27;break}return o=t.t0.mfaToken,t.prev=16,t.next=19,e.pryvService.mfaChallenge(s,o);case 19:e.user.mfaToken=o||"",t.next=25;break;case 22:throw t.prev=22,t.t1=t.catch(16),new U("Failed to perform MFA challenge.");case 25:t.next=29;break;case 27:throw a=t.t0.message||"Failed to login.",new U(a);case 29:case"end":return t.stop()}},t,this,[[5,12],[16,22]])}));return function(e,r){return t.apply(this,arguments)}}(),W=function(){var t=a()(i.a.mark(function t(e){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r={status:"REFUSED",reasonId:"REFUSED_BY_USER",message:"The user refused to give access to the requested permissions"},t.prev=1,t.next=4,e.updateAccessState(r);case 4:return t.prev=4,j(e),t.finish(4);case 7:case"end":return t.stop()}},t,this,[[1,,4,7]])}));return function(e){return t.apply(this,arguments)}}(),Z=function(){var t=a()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e);case 2:return t.next=4,e.pryvService.requestPasswordReset(e.user.username,e.appId);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),J=function(){var t=a()(i.a.mark(function t(e){var r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.pryvService.info();case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),X=function(){var t=a()(i.a.mark(function t(e,r){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.pryvService.mfaVerify(e.user.username,e.user.mfaToken,r);case 3:e.user.personalToken=t.sent,t.next=9;break;case 6:throw t.prev=6,t.t0=t.catch(0),new U("MFA verification failed.");case 9:case"end":return t.stop()}},t,this,[[0,6]])}));return function(e,r){return t.apply(this,arguments)}}();function Y(t,e){var r=this;return a()(i.a.mark(function s(){for(var n=arguments.length,o=Array(n),a=0;a<n;a++)o[a]=arguments[a];return i.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.apply(void 0,[t].concat(q()(o)));case 3:return r.abrupt("return",r.sent);case 6:if(r.prev=6,r.t0=r.catch(0),!(r.t0 instanceof U)){r.next=12;break}throw r.t0;case 12:throw new U(r.t0);case 13:case"end":return r.stop()}},s,r,[[0,6]])}))}var K=function(t){return{acceptAccess:Y(t,L),resetPassword:Y(t,z),changePassword:Y(t,B),checkAccess:Y(t,H),createUser:Y(t,G),loadHostings:Y(t,$),login:Y(t,V),refuseAccess:Y(t,W),requestResetPassword:Y(t,Z),getServiceInfo:Y(t,J),checkUsername:Y(t,M),mfaVerify:Y(t,X)}},Q={components:{Password:R,Alerts:P},data:function(){return{password:"",email:"",hosting:"",hostingsSelection:[],newUser:null,submitting:!1,ctx:{},c:null,error:"",success:"",rules:{required:function(t){return!!t||"This field is required."}},validForm:!1}},created:function(){var t=a()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.ctx=new _(this.$route.query),t.next=3,this.ctx.init();case 3:this.c=K(this.ctx),this.c.loadHostings().then(this.initHostings).catch(this.showError);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{submit:function(){var t=this;if(this.$refs.form.validate()){this.submitting=!0,this.generateRandomEmailIfNeeded();var e="";this.hostingsSelection.forEach(function(r){r.value===t.hosting&&(e=r.availableCore)}),this.c.createUser(e,this.password,this.email,this.hosting).then(function(e){t.newUser=e,t.success="New user successfully created: "+e.username+".",t.ctx.isAccessRequest()||(location.href=t.ctx.pryvService.apiEndpointForSync(e.username))}).catch(this.showError).finally(function(){t.submitting=!1})}},clear:function(){this.$refs.form.reset()},initHostings:function(t){this.hostingsSelection=t,this.hostingsSelection.length>0&&(this.hosting=this.hostingsSelection[0].value)},showError:function(t){this.error=t.msg},generateRandomEmailIfNeeded:function(){(null==this.email||"string"==typeof this.email&&0===this.email.length)&&(this.email=function(t){for(var e="",r="abcdefghijklmnopqrstuvwxyz0123456789",s=r.length,n=0;n<t;n++)e+=r.charAt(Math.floor(Math.random()*s));return e}(20)+"@pryv.io")}}};var tt={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("Register a new user")]),t._v(" "),null==t.newUser?r("v-form",{ref:"form",attrs:{id:"registerForm"},on:{submit:function(t){t.preventDefault()}},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[r("v-text-field",{attrs:{id:"email",label:"E-mail",placeholder:"Optional (required for password reset)"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),t._v(" "),r("v-text-field",{attrs:{id:"username",rules:[t.rules.required],label:"Username"},model:{value:t.ctx.user.username,callback:function(e){t.$set(t.ctx.user,"username",e)},expression:"ctx.user.username"}}),t._v(" "),r("Password",{attrs:{confirmation:!0},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),r("v-autocomplete",{attrs:{id:"hosting",items:t.hostingsSelection,rules:[t.rules.required],placeholder:"Choose hosting...",label:"Hosting"},model:{value:t.hosting,callback:function(e){t.hosting=e},expression:"hosting"}}),t._v(" "),r("v-btn",{attrs:{id:"submitButton",disabled:!t.validForm||t.submitting},on:{click:t.submit}},[t._v("Create")]),t._v(" "),r("v-btn",{attrs:{id:"clearButton"},on:{click:t.clear}},[t._v("Clear")]),t._v(" "),r("div",[t._v("\n      By registering you agree with our\n      "),r("a",{attrs:{target:"_blank",href:"https://pryv.com/terms-of-use/"}},[t._v("\n      terms of use")]),t._v(".\n    ")])],1):t._e(),t._v(" "),t.ctx.isAccessRequest()?r("div",[r("v-divider",{staticClass:"mt-3 mb-2"}),t._v(" "),r("router-link",{attrs:{to:{name:"Authorization"}}},[r("h3",[t._v("Go to Sign in")])])],1):t._e(),t._v(" "),r("Alerts",{attrs:{successMsg:t.success,errorMsg:t.error}})],1)},staticRenderFns:[]},et=r("VU/8")(Q,tt,!1,null,null,null).exports,rt={components:{Password:R,Alerts:P},props:{resetToken:{type:String,default:null}},data:function(){return{password:"",error:"",success:"",showForm:!0,submitting:!1,ctx:{},c:null,rules:{required:function(t){return!!t||"This field is required."}},validForm:!1}},computed:{pageTitle:function(){return this.resetToken?"Set a new password":"Reset password"},buttonText:function(){return this.resetToken?"Change password":"Request password reset"}},created:function(){var t=a()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.ctx=new _(this.$route.query),t.next=3,this.ctx.init();case 3:this.c=K(this.ctx);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{submit:function(){var t=this;this.ctx.user.username=this.ctx.user.username.trim(),this.$refs.form.validate()&&(this.submitting=!0,null==this.resetToken?this.c.requestResetPassword().then(function(){t.showForm=!1,t.success="We have sent password reset instructions to your e-mail address."}).catch(this.showError).finally(function(){t.submitting=!1}):this.c.resetPassword(this.password,this.resetToken).then(function(){t.showForm=!1,t.success="Your password have been successfully changed."}).catch(this.showError).finally(function(){t.submitting=!1}))},showError:function(t){this.error=t.msg}}},st={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v(t._s(t.pageTitle))]),t._v(" "),t.showForm?r("v-form",{ref:"form",on:{submit:function(t){t.preventDefault()}},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[r("v-text-field",{attrs:{id:"usernameOrEmail",rules:[t.rules.required],label:"Username or email"},model:{value:t.ctx.user.username,callback:function(e){t.$set(t.ctx.user,"username",e)},expression:"ctx.user.username"}}),t._v(" "),null!=t.resetToken?r("Password",{attrs:{confirmation:!0},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}):t._e(),t._v(" "),r("v-btn",{attrs:{id:"submitButton",disabled:!t.validForm||t.submitting},on:{click:t.submit}},[t._v(t._s(t.buttonText))])],1):t._e(),t._v(" "),t.ctx.isAccessRequest()?r("div",[r("v-divider",{staticClass:"mt-3 mb-2"}),t._v(" "),r("router-link",{attrs:{to:{name:"Authorization"}}},[r("h3",[t._v("Go to Sign in")])])],1):t._e(),t._v(" "),r("Alerts",{attrs:{successMsg:t.success,errorMsg:t.error}})],1)},staticRenderFns:[]},nt=r("VU/8")(rt,st,!1,null,null,null).exports,it=r("EFqf"),ot=r.n(it),at={props:{ctx:{type:Object,default:function(){}}},data:function(){return{dialog:!0,accessState:null,checkAppResult:null}},computed:{consentMsg:function(){if(null!=this.ctx.accessState.clientData){var t=this.ctx.accessState.clientData["app-web-auth:description"];return null!=t?ot()(t.content):""}},accessMismatch:function(){return null!=this.ctx.checkAppResult.mismatchingAccess},expire:function(){return null!=this.ctx.accessState.expireAfter}},created:function(){this.accessState=this.ctx.accessState,this.checkAppResult=this.ctx.checkAppResult},methods:{closeDialog:function(t){this.dialog=!1,this.$emit(t)}}},ct={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-dialog",{attrs:{width:"600",persistent:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2",attrs:{id:"appIdText"}},[r("span",[r("b",[t._v(t._s(t.accessState.requestingAppId))])])]),t._v(" "),r("v-card-text",{staticStyle:{"text-align":"left"}},[r("h4",[t._v("Is requesting permission:")]),t._v(" "),r("ul",t._l(t.accessState.requestedPermissions,function(e,s){return r("li",{key:s},[t._v("\n          to "+t._s(e.level.toLowerCase())+" "),r("u",[t._v(t._s("*"===e.streamId?"* (all data)":e.name||e.defaultName))])])}),0),t._v(" "),t.expire?r("span",{staticStyle:{"text-align":"left"}},[r("b",[t._v("will expire after:")]),t._v(" "+t._s(t.accessState.expireAfter)+"s\n      ")]):t._e(),t._v(" "),r("br"),t._v(" "),t.consentMsg?r("span",{domProps:{innerHTML:t._s(t.consentMsg)}}):t._e()]),t._v(" "),t.accessMismatch?r("v-alert",{staticStyle:{"text-align":"left"},attrs:{value:t.accessMismatch,type:t.alertType,transition:"scale-transition"}},[r("b",[t._v("A different access was already given to this app. Do you want to replace it?")])]):t._e(),t._v(" "),r("v-divider"),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{attrs:{id:"refusePermissions"},on:{click:function(e){return t.closeDialog("refused")}}},[t._v("Reject")]),t._v(" "),r("v-btn",{attrs:{id:"acceptPermissions"},on:{click:function(e){return t.closeDialog("accepted")}}},[t._v("Accept")])],1)],1)],1)},staticRenderFns:[]},ut={components:{Password:R,Permissions:r("VU/8")(at,ct,!1,null,null,null).exports,Alerts:P},data:function(){return{password:"",personalToken:"",mfaToken:"",mfaCode:"",error:"",checkedPermissions:null,checkAppResult:null,serviceInfos:{},submitting:!1,c:null,ctx:{},rules:{required:function(t){return!!t||"This field is required."},email:function(t){return/.+@.+/.test(t)||"E-mail must be valid"}},validForm:!1}},computed:{mfaActivated:{get:function(){return""!==this.ctx.user.mfaToken}}},created:function(){var t=a()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.ctx=new _(this.$route.query),t.next=3,this.ctx.init();case 3:this.c=K(this.ctx),this.c.getServiceInfo().then(this.showInfos).catch(this.showError);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{submit:function(){var t=a()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.ctx.user.username=this.ctx.user.username.trim(),!this.$refs.form.validate()){t.next=19;break}return this.submitting=!0,t.prev=3,t.next=6,this.c.login(this.password);case 6:if(this.ctx.accessState){t.next=8;break}throw new Error('Context access state not defined. Verify that you are performing an Auth request process and either "poll" is specified in query parameters.');case 8:if(this.mfaActivated){t.next=11;break}return t.next=11,this.c.checkAccess(this.showPermissions);case 11:t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),this.showError(t.t0);case 16:return t.prev=16,this.submitting=!1,t.finish(16);case 19:case"end":return t.stop()}},t,this,[[3,13,16,19]])}));return function(){return t.apply(this,arguments)}}(),handleMFA:function(){var t=a()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.c.mfaVerify(this.mfaCode);case 3:return t.next=5,this.c.checkAccess(this.showPermissions);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),this.showError(t.t0);case 10:return t.prev=10,this.ctx.user.mfaToken="",t.finish(10);case 13:case"end":return t.stop()}},t,this,[[0,7,10,13]])}));return function(){return t.apply(this,arguments)}}(),showPermissions:function(){this.checkAppResult=this.ctx.checkAppResult,this.checkedPermissions=this.ctx.checkedPermissions},accept:function(){this.c.acceptAccess().catch(this.showError)},refuse:function(){this.c.refuseAccess().catch(this.showError)},showError:function(t){this.error=t.msg||t.message},showInfos:function(t){this.serviceInfos=t}}},lt={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("Sign in")]),t._v(" "),null!=t.ctx.checkAppResult.checkedPermissions?r("Permissions",{attrs:{ctx:t.ctx},on:{accepted:t.accept,refused:t.refuse}}):t._e(),t._v(" "),r("v-dialog",{attrs:{persistent:"",width:"600"},model:{value:t.mfaActivated,callback:function(e){t.mfaActivated=e},expression:"mfaActivated"}},[r("v-card",[r("v-card-title",{staticClass:"headline grey lighten-2"},[t._v("MFA verification")]),t._v(" "),r("v-text-field",{staticClass:"ma-3",attrs:{id:"mfaCode",rules:[t.rules.required],label:"MFA code"},model:{value:t.mfaCode,callback:function(e){t.mfaCode=e},expression:"mfaCode"}}),t._v(" "),r("v-card-actions",[r("v-spacer"),t._v(" "),r("v-btn",{on:{click:function(e){t.ctx.user.mfaToken="",t.mfaCode=""}}},[t._v("Cancel")]),t._v(" "),r("v-btn",{on:{click:function(e){return t.handleMFA()}}},[t._v("Ok")])],1)],1)],1),t._v(" "),r("v-form",{ref:"form",on:{submit:function(t){t.preventDefault()}},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[r("v-text-field",{attrs:{id:"usernameOrEmail",rules:[t.rules.required],label:"Username or email"},model:{value:t.ctx.user.username,callback:function(e){t.$set(t.ctx.user,"username",e)},expression:"ctx.user.username"}}),t._v(" "),r("Password",{model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),t._v(" "),r("v-btn",{attrs:{id:"submitButton",disabled:!t.validForm||t.submitting},on:{click:t.submit}},[t._v("Sign In")]),t._v(" "),r("v-btn",{on:{click:t.refuse}},[t._v("Cancel")]),t._v(" "),t.serviceInfos.support?r("div",[t._v("\n      Feel free to reach our\n      "),r("a",{attrs:{href:t.serviceInfos.support,target:"_blank"}},[t._v(" helpdesk")]),t._v("\n      if you have questions.\n    ")]):t._e()],1),t._v(" "),r("v-divider",{staticClass:"mt-3 mb-2"}),t._v(" "),r("router-link",{attrs:{to:{name:"RegisterUser"}}},[r("h3",[t._v("Create an account")])]),t._v(" "),r("router-link",{attrs:{to:{name:"ResetPassword"}}},[r("h3",[t._v("Forgot password")])]),t._v(" "),r("router-link",{attrs:{to:{name:"ChangePassword"}}},[r("h3",[t._v("Change password")])]),t._v(" "),r("Alerts",{attrs:{errorMsg:t.error}})],1)},staticRenderFns:[]},pt=r("VU/8")(ut,lt,!1,null,null,null).exports,ht={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("h1",[this._v("404 - Page not found")]),this._v("\n  The page you are looking for is like time in quantum gravity theories, it does not exist.\n")])}]},dt=r("VU/8")(null,ht,!1,null,null,null).exports,ft={components:{Alerts:P},data:function(){return{username:"",error:"",ctx:{},c:null,rules:{required:function(t){return!!t||"This field is required."}},validForm:!1,serviceInfo:{name:""}}},created:function(){var t=a()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.ctx=new _(this.$route.query),t.next=3,this.ctx.init();case 3:return this.c=K(this.ctx),t.next=6,this.ctx.pryvService.info();case 6:this.serviceInfo=t.sent;case 7:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{submit:function(){this.ctx.user.username=this.ctx.user.username.trim(),this.$refs.form.validate()&&this.c.checkUsername().then(this.toMyPryv).catch(this.showError)},toMyPryv:function(){location.href=this.ctx.pryvService.apiEndpointForSync(this.ctx.user.username)},showError:function(t){this.error=t.msg}}},mt={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("Signin hub")]),t._v(" "),r("v-form",{ref:"form",on:{submit:function(t){t.preventDefault()}},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[r("v-text-field",{attrs:{id:"usernameOrEmail",rules:[t.rules.required],label:"Username or email"},model:{value:t.ctx.user.username,callback:function(e){t.$set(t.ctx.user,"username",e)},expression:"ctx.user.username"}}),t._v(" "),r("v-btn",{attrs:{id:"submitButton",disabled:!t.validForm},on:{click:t.submit}},[t._v("Go to my homepage")])],1),t._v(" "),r("v-divider",{staticClass:"mt-3 mb-2"}),t._v(" "),r("router-link",{attrs:{to:{name:"RegisterUser"}}},[r("h3",[t._v("New to "+t._s(t.serviceInfo.name)+" ? Create an account")])]),t._v(" "),r("Alerts",{attrs:{errorMsg:t.error}})],1)},staticRenderFns:[]},vt=r("VU/8")(ft,mt,!1,null,null,null).exports,yt={components:{Password:R,Alerts:P},data:function(){return{showForm:!0,oldPassword:"",newPassword:"",error:"",success:"",submitting:!1,ctx:{},controllerFactory:null,rules:{required:function(t){return!!t||"This field is required."}},validForm:!1}},created:function(){var t=a()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.ctx=new _(this.$route.query),t.next=3,this.ctx.init();case 3:this.controllerFactory=K(this.ctx);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),methods:{submit:function(){var t=this;this.ctx.user.username=this.ctx.user.username.trim(),this.$refs.form.validate()&&(this.submitting=!0,this.controllerFactory.login(this.oldPassword).then(function(){return t.controllerFactory.changePassword(t.oldPassword,t.newPassword)}).then(function(){t.showForm=!1,t.success="Your password has been successfully changed."}).catch(this.showError).finally(function(){t.submitting=!1}))},showError:function(t){this.error=t.msg}}},gt={render:function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("Change password")]),t._v(" "),t.showForm?r("v-form",{ref:"form",on:{submit:function(t){t.preventDefault()}},model:{value:t.validForm,callback:function(e){t.validForm=e},expression:"validForm"}},[r("v-text-field",{attrs:{id:"usernameOrEmail",rules:[t.rules.required],label:"Username or email"},model:{value:t.ctx.user.username,callback:function(e){t.$set(t.ctx.user,"username",e)},expression:"ctx.user.username"}}),t._v(" "),r("Password",{attrs:{confirmation:!1,id:"oldPassword"},model:{value:t.oldPassword,callback:function(e){t.oldPassword=e},expression:"oldPassword"}}),t._v(" "),r("Password",{attrs:{confirmation:!0,label:"New password",id:"newPassword"},model:{value:t.newPassword,callback:function(e){t.newPassword=e},expression:"newPassword"}}),t._v(" "),r("v-btn",{attrs:{id:"submitButton",disabled:!t.validForm||t.submitting},on:{click:t.submit}},[t._v("REQUEST PASSWORD CHANGE")])],1):t._e(),t._v(" "),r("Alerts",{attrs:{successMsg:t.success,errorMsg:t.error}})],1)},staticRenderFns:[]},wt=r("VU/8")(yt,gt,!1,null,null,null).exports,bt=r("4lvf"),_t=r.n(bt);s.default.use(S.a);var xt=new URL(document.location).pathname,kt=xt.substring(0,xt.lastIndexOf("/access/"))+"/"+_t.a.basePath,Et=new S.a({mode:"history",base:kt,routes:[{path:"/",redirect:{name:"Authorization"}},{path:"/auth",name:"Authorization",component:pt,alias:_t.a.pages.auth},{path:"/register",name:"RegisterUser",component:et,alias:_t.a.pages.register},{path:"/reset",name:"ResetPassword",component:nt,props:function(t){return{resetToken:t.query.resetToken}},alias:_t.a.pages.reset},{path:"/signin",name:"SigninHub",component:vt,alias:_t.a.pages.signin},{path:"/change-password",name:"ChangePassword",component:wt,alias:_t.a.pages.changepass},{path:"*",component:dt}]});function St(t){return!!Object.keys(t.query).length}Et.beforeEach(function(t,e,r){!St(t)&&St(e)?r({name:t.name,query:e.query}):r()});var At=Et,Tt=r("3EgV"),Rt=r.n(Tt);r("7zck");s.default.use(Rt.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:At,components:{App:E},template:"<App/>"})},OkFM:function(t,e,r){const s=r("zp3n"),n=r("rRym");class i{constructor(t,e){this._pryvServiceInfo=null,this._assets=null,this._polling=!1,this._pryvServiceInfoUrl=t,this._pryvServiceCustomizations=e}async info(t){if(t||!this._pryvServiceInfo){let t={};if(this._pryvServiceInfoUrl){t=(await s.superagent.get(this._pryvServiceInfoUrl).set("Access-Control-Allow-Origin","*").set("accept","json")).body}Object.assign(t,this._pryvServiceCustomizations),this.setServiceInfo(t)}return this._pryvServiceInfo}setServiceInfo(t){if(!t.name)throw new Error("Invalid data from service/info");["access","api","register"].forEach(e=>{"/"!==t[e].slice(-1)&&(t[e]+="/")}),this._pryvServiceInfo=t}async assets(t){if(!t&&this._assets)return this._assets;{const t=await this.info();return t.assets&&t.assets.definitions?(this._assets=await n.setup(t.assets.definitions),this._assets):(console.log("Warning: no assets for this service"),null)}}infoSync(){return this._pryvServiceInfo}async apiEndpointFor(t,e){const r=await this.info();return i.buildAPIEndpoint(r,t,e)}static buildAPIEndpoint(t,e,r){const n=t.api.replace("{username}",e);return s.buildPryvApiEndpoint({endpoint:n,token:r})}async login(t,e,r,n){const a=await this.apiEndpointFor(t);try{const c={accept:"json"};n=n||(await this.info()).register,s.isBrowser()||(c.Origin=n);const u=await s.superagent.post(a+"auth/login").set(c).send({username:t,password:e,appId:r});if(!u.body.token)throw new Error("Invalid login response: "+u.body);return new o(i.buildAPIEndpoint(await this.info(),t,u.body.token),this)}catch(t){if(t.response&&t.response.body&&t.response.body.error&&t.response.body.error.message)throw new Error(t.response.body.error.message)}}}t.exports=i;const o=r("/oEN")},RAkL:function(t,e,r){const s=r("udG1"),n=r("o951"),i=(r("OkFM"),r("zp3n"));t.exports={LoginButton:s,CookieUtils:n,AuthStates:r("kZww"),setupAuth:r("0zZN").setupAuth,serviceInfoFromUrl:function(t){return i.getQueryParamsFromURL(t||window.location.href).pryvServiceInfoUrl}}},"XD/J":function(t,e){t.exports=n,n.default=n,n.stable=o,n.stableStringify=o;var r=[],s=[];function n(t,e,n){var i;for(!function t(e,n,i,o){var a;if("object"==typeof e&&null!==e){for(a=0;a<i.length;a++)if(i[a]===e){var c=Object.getOwnPropertyDescriptor(o,n);return void(void 0!==c.get?c.configurable?(Object.defineProperty(o,n,{value:"[Circular]"}),r.push([o,n,e,c])):s.push([e,n]):(o[n]="[Circular]",r.push([o,n,e])))}if(i.push(e),Array.isArray(e))for(a=0;a<e.length;a++)t(e[a],a,i,e);else{var u=Object.keys(e);for(a=0;a<u.length;a++){var l=u[a];t(e[l],l,i,e)}}i.pop()}}(t,"",[],void 0),i=0===s.length?JSON.stringify(t,e,n):JSON.stringify(t,a(e),n);0!==r.length;){var o=r.pop();4===o.length?Object.defineProperty(o[0],o[1],o[3]):o[0][o[1]]=o[2]}return i}function i(t,e){return t<e?-1:t>e?1:0}function o(t,e,n){var o,c=function t(e,n,o,a){var c;if("object"==typeof e&&null!==e){for(c=0;c<o.length;c++)if(o[c]===e){var u=Object.getOwnPropertyDescriptor(a,n);return void(void 0!==u.get?u.configurable?(Object.defineProperty(a,n,{value:"[Circular]"}),r.push([a,n,e,u])):s.push([e,n]):(a[n]="[Circular]",r.push([a,n,e])))}if("function"==typeof e.toJSON)return;if(o.push(e),Array.isArray(e))for(c=0;c<e.length;c++)t(e[c],c,o,e);else{var l={},p=Object.keys(e).sort(i);for(c=0;c<p.length;c++){var h=p[c];t(e[h],h,o,e),l[h]=e[h]}if(void 0===a)return l;r.push([a,n,e]),a[n]=l}o.pop()}}(t,"",[],void 0)||t;for(o=0===s.length?JSON.stringify(c,e,n):JSON.stringify(c,a(e),n);0!==r.length;){var u=r.pop();4===u.length?Object.defineProperty(u[0],u[1],u[3]):u[0][u[1]]=u[2]}return o}function a(t){return t=void 0!==t?t:function(t,e){return e},function(e,r){if(s.length>0)for(var n=0;n<s.length;n++){var i=s[n];if(i[1]===e&&i[0]===r){r="[Circular]",s.splice(n,1);break}}return t.call(this,e,r)}}},Zthf:function(t,e){t.exports={DNSLess:!1}},b9ne:function(t,e,r){"use strict";e.type=function(t){return t.split(/ *; */).shift()},e.params=function(t){return t.split(/ *; */).reduce(function(t,e){var r=e.split(/ *= */),s=r.shift(),n=r.shift();return s&&n&&(t[s]=n),t},{})},e.parseLinks=function(t){return t.split(/ *, */).reduce(function(t,e){var r=e.split(/ *; */),s=r[0].slice(1,-1);return t[r[1].split(/ *= */)[1].slice(1,-1)]=s,t},{})},e.cleanHeader=function(t,e){return delete t["content-type"],delete t["content-length"],delete t["transfer-encoding"],delete t.host,e&&(delete t.authorization,delete t.cookie),t}},cTpx:function(t,e){const r={LOADING:{en:"..."},ERROR:{en:"Error",fr:"Erreur"},LOGIN:{en:"Signin",fr:"Login"},SIGNOUT_CONFIRM:{en:"Logout ?",fr:"Se deconnecter ?"}};t.exports=function(t,e){const s=e||r,n={};return Object.keys(s).map(e=>{n[e]=s[e][t]||s[e].en}),n}},eARU:function(t,e,r){"use strict";function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n;"undefined"!=typeof window?n=window:"undefined"==typeof self?(console.warn("Using browser-only version of superagent in non-browser environment"),n=void 0):n=self;var i=r("B4C/"),o=r("XD/J"),a=r("u7Qr"),c=r("IA4a"),u=r("0/y9"),l=r("IpiD");function p(){}t.exports=function(t,r){return"function"==typeof r?new e.Request("GET",t).end(r):1===arguments.length?new e.Request("GET",t):new e.Request(t,r)};var h=e=t.exports;e.Request=w,h.getXHR=function(){if(n.XMLHttpRequest&&(!n.location||"file:"!==n.location.protocol||!n.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(t){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(t){}throw new Error("Browser-only version of superagent could not find XHR")};var d="".trim?function(t){return t.trim()}:function(t){return t.replace(/(^\s*|\s*$)/g,"")};function f(t){if(!c(t))return t;var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&m(e,r,t[r]);return e.join("&")}function m(t,e,r){if(void 0!==r)if(null!==r)if(Array.isArray(r))r.forEach(function(r){m(t,e,r)});else if(c(r))for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&m(t,"".concat(e,"[").concat(s,"]"),r[s]);else t.push(encodeURI(e)+"="+encodeURIComponent(r));else t.push(encodeURI(e))}function v(t){for(var e,r,s={},n=t.split("&"),i=0,o=n.length;i<o;++i)-1===(r=(e=n[i]).indexOf("="))?s[decodeURIComponent(e)]="":s[decodeURIComponent(e.slice(0,r))]=decodeURIComponent(e.slice(r+1));return s}function y(t){return/[/+]json($|[^-\w])/.test(t)}function g(t){this.req=t,this.xhr=this.req.xhr,this.text="HEAD"!==this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null,this.statusText=this.req.xhr.statusText;var e=this.xhr.status;1223===e&&(e=204),this._setStatusProperties(e),this.headers=function(t){for(var e,r,s,n,i=t.split(/\r?\n/),o={},a=0,c=i.length;a<c;++a)-1!==(e=(r=i[a]).indexOf(":"))&&(s=r.slice(0,e).toLowerCase(),n=d(r.slice(e+1)),o[s]=n);return o}(this.xhr.getAllResponseHeaders()),this.header=this.headers,this.header["content-type"]=this.xhr.getResponseHeader("content-type"),this._setHeaderProperties(this.header),null===this.text&&t._responseType?this.body=this.xhr.response:this.body="HEAD"===this.req.method?null:this._parseBody(this.text?this.text:this.xhr.response)}function w(t,e){var r=this;this._query=this._query||[],this.method=t,this.url=e,this.header={},this._header={},this.on("end",function(){var t,e=null,s=null;try{s=new g(r)}catch(t){return(e=new Error("Parser is unable to parse the response")).parse=!0,e.original=t,r.xhr?(e.rawResponse=void 0===r.xhr.responseType?r.xhr.responseText:r.xhr.response,e.status=r.xhr.status?r.xhr.status:null,e.statusCode=e.status):(e.rawResponse=null,e.status=null),r.callback(e)}r.emit("response",s);try{r._isResponseOK(s)||(t=new Error(s.statusText||s.text||"Unsuccessful HTTP response"))}catch(e){t=e}t?(t.original=e,t.response=s,t.status=s.status,r.callback(t,s)):r.callback(null,s)})}function b(t,e,r){var s=h("DELETE",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s}h.serializeObject=f,h.parseString=v,h.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"},h.serialize={"application/x-www-form-urlencoded":f,"application/json":o},h.parse={"application/x-www-form-urlencoded":v,"application/json":JSON.parse},u(g.prototype),g.prototype._parseBody=function(t){var e=h.parse[this.type];return this.req._parser?this.req._parser(this,t):(!e&&y(this.type)&&(e=h.parse["application/json"]),e&&t&&(t.length>0||t instanceof Object)?e(t):null)},g.prototype.toError=function(){var t=this.req,e=t.method,r=t.url,s="cannot ".concat(e," ").concat(r," (").concat(this.status,")"),n=new Error(s);return n.status=this.status,n.method=e,n.url=r,n},h.Response=g,i(w.prototype),a(w.prototype),w.prototype.type=function(t){return this.set("Content-Type",h.types[t]||t),this},w.prototype.accept=function(t){return this.set("Accept",h.types[t]||t),this},w.prototype.auth=function(t,e,r){1===arguments.length&&(e=""),"object"===s(e)&&null!==e&&(r=e,e=""),r||(r={type:"function"==typeof btoa?"basic":"auto"});return this._auth(t,e,r,function(t){if("function"==typeof btoa)return btoa(t);throw new Error("Cannot use basic auth, btoa is not a function")})},w.prototype.query=function(t){return"string"!=typeof t&&(t=f(t)),t&&this._query.push(t),this},w.prototype.attach=function(t,e,r){if(e){if(this._data)throw new Error("superagent can't mix .send() and .attach()");this._getFormData().append(t,e,r||e.name)}return this},w.prototype._getFormData=function(){return this._formData||(this._formData=new n.FormData),this._formData},w.prototype.callback=function(t,e){if(this._shouldRetry(t,e))return this._retry();var r=this._callback;this.clearTimeout(),t&&(this._maxRetries&&(t.retries=this._retries-1),this.emit("error",t)),r(t,e)},w.prototype.crossDomainError=function(){var t=new Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");t.crossDomain=!0,t.status=this.status,t.method=this.method,t.url=this.url,this.callback(t)},w.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this},w.prototype.ca=w.prototype.agent,w.prototype.buffer=w.prototype.ca,w.prototype.write=function(){throw new Error("Streaming is not supported in browser version of superagent")},w.prototype.pipe=w.prototype.write,w.prototype._isHost=function(t){return t&&"object"===s(t)&&!Array.isArray(t)&&"[object Object]"!==Object.prototype.toString.call(t)},w.prototype.end=function(t){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent"),this._endCalled=!0,this._callback=t||p,this._finalizeQueryString(),this._end()},w.prototype._setUploadTimeout=function(){var t=this;this._uploadTimeout&&!this._uploadTimeoutTimer&&(this._uploadTimeoutTimer=setTimeout(function(){t._timeoutError("Upload timeout of ",t._uploadTimeout,"ETIMEDOUT")},this._uploadTimeout))},w.prototype._end=function(){if(this._aborted)return this.callback(new Error("The request has been aborted even before .end() was called"));var t=this;this.xhr=h.getXHR();var e=this.xhr,r=this._formData||this._data;this._setTimeouts(),e.onreadystatechange=function(){var r=e.readyState;if(r>=2&&t._responseTimeoutTimer&&clearTimeout(t._responseTimeoutTimer),4===r){var s;try{s=e.status}catch(t){s=0}if(!s){if(t.timedout||t._aborted)return;return t.crossDomainError()}t.emit("end")}};var s=function(e,r){r.total>0&&(r.percent=r.loaded/r.total*100,100===r.percent&&clearTimeout(t._uploadTimeoutTimer)),r.direction=e,t.emit("progress",r)};if(this.hasListeners("progress"))try{e.addEventListener("progress",s.bind(null,"download")),e.upload&&e.upload.addEventListener("progress",s.bind(null,"upload"))}catch(t){}e.upload&&this._setUploadTimeout();try{this.username&&this.password?e.open(this.method,this.url,!0,this.username,this.password):e.open(this.method,this.url,!0)}catch(t){return this.callback(t)}if(this._withCredentials&&(e.withCredentials=!0),!this._formData&&"GET"!==this.method&&"HEAD"!==this.method&&"string"!=typeof r&&!this._isHost(r)){var n=this._header["content-type"],i=this._serializer||h.serialize[n?n.split(";")[0]:""];!i&&y(n)&&(i=h.serialize["application/json"]),i&&(r=i(r))}for(var o in this.header)null!==this.header[o]&&Object.prototype.hasOwnProperty.call(this.header,o)&&e.setRequestHeader(o,this.header[o]);this._responseType&&(e.responseType=this._responseType),this.emit("request",this),e.send(void 0===r?null:r)},h.agent=function(){return new l},["GET","POST","OPTIONS","PATCH","PUT","DELETE"].forEach(function(t){l.prototype[t.toLowerCase()]=function(e,r){var s=new h.Request(t,e);return this._setDefaults(s),r&&s.end(r),s}}),l.prototype.del=l.prototype.delete,h.get=function(t,e,r){var s=h("GET",t);return"function"==typeof e&&(r=e,e=null),e&&s.query(e),r&&s.end(r),s},h.head=function(t,e,r){var s=h("HEAD",t);return"function"==typeof e&&(r=e,e=null),e&&s.query(e),r&&s.end(r),s},h.options=function(t,e,r){var s=h("OPTIONS",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},h.del=b,h.delete=b,h.patch=function(t,e,r){var s=h("PATCH",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},h.post=function(t,e,r){var s=h("POST",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s},h.put=function(t,e,r){var s=h("PUT",t);return"function"==typeof e&&(r=e,e=null),e&&s.send(e),r&&s.end(r),s}},hApR:function(t,e,r){const s=r("q37K");t.exports=s},kZww:function(t,e){t.exports={ERROR:"ERROR",LOADING:"LOADING",INITIALIZED:"INITIALIZED",NEED_SIGNIN:"NEED_SIGNIN",AUTHORIZED:"ACCEPTED",SIGNOUT:"SIGNOUT",REFUSED:"REFUSED"}},o951:function(t,e,r){const s=r("zp3n");function n(t,e,r){if(s.isBrowser()){r=r||365;var n=new Date,i=window.location.hostname,o=window.location.pathname;n.setDate(n.getDate()+r);var a=encodeURIComponent(t)+"="+encodeURIComponent(JSON.stringify(e))+";expires="+n.toGMTString()+";domain=."+i+";path="+o;r>=0&&(a+=";SameSite=Strict"),document.cookie=a}}e.set=n,e.get=function(t){const e=encodeURIComponent(t);if(s.isBrowser()){var r=("; "+document.cookie).split("; "+e+"=");return 2==r.length?JSON.parse(decodeURIComponent(r.pop().split(";").shift())):void 0}},e.del=function(t){n(t,{deleted:!0},-1)}},q37K:function(t,e,r){t.exports={Service:r("OkFM"),Connection:r("/oEN"),Auth:r("0zZN"),Browser:r("RAkL"),utils:r("zp3n"),version:r("1yTK").version}},rRym:function(t,e,r){const s=r("zp3n");class n{constructor(t,e){this._assets=t,this._assetsURL=e}static async setup(t){const e=await s.superagent.get(t).set("accept","json");return new n(e.body,t)}get(t){let e=Object.assign({},this._assets);return t&&t.split(":").forEach(t=>{if(void 0===(e=e[t]))return e}),e}getUrl(t){const e=this.get(t);if("string"!=typeof e)throw new Error(e+" returned "+value);return this.relativeURL(e)}relativeURL(t){return function(t,e){var r=location;t&&((r=document.createElement("a")).href=t);for(var s,n,i="",o=r.pathname.replace(/[^\/]*$/,e.replace(/(\/|^)(?:\.?\/+)+/g,"$1")),a=0;(n=o.indexOf("/../",a))>-1;a=n+s)s=/^\/(?:\.\.\/)*/.exec(o.slice(n))[0].length,i=(i+o.substring(a,n)).replace(new RegExp("(?:\\/+[^\\/]*){0,"+(s-1)/3+"}$"),"/");let c=r.port?":"+r.port:"";return r.protocol+"//"+r.hostname+c+i+o.substr(a)}(this._assets.baseUrl||this._assetsURL,t)}async setAllDefaults(){this.setFavicon(),await this.loadCSS()}setFavicon(){var t=document.querySelector("link[rel*='icon']")||document.createElement("link");t.type="image/x-icon",t.rel="shortcut icon",t.href=this.relativeURL(this._assets.favicon.default.url),document.getElementsByTagName("head")[0].appendChild(t)}async loadCSS(){i(this.relativeURL(this._assets.css.default.url))}async loginButtonLoadCSS(){i(this.relativeURL(this._assets["lib-js"].buttonSignIn.css))}async loginButtonGetHTML(){return(await s.superagent.get(this.relativeURL(this._assets["lib-js"].buttonSignIn.html)).set("accept","html")).text}async loginButtonGetMessages(){return(await s.superagent.get(this.relativeURL(this._assets["lib-js"].buttonSignIn.messages)).set("accept","json")).body}}function i(t){var e=document.getElementsByTagName("head")[0],r=document.createElement("link");r.id=t,r.rel="stylesheet",r.type="text/css",r.href=t,r.media="all",e.appendChild(r)}t.exports=n},t3J9:function(t,e){const r=['"events":[','"eventDeletions":['];t.exports=function(t,e){let s=0,n="",i=null,o=0,a=!1,c=!1,u=0,l=0,p=0;const h={A_BEFORE_EVENTS:0,B_IN_EVENTS:1,D_AFTER_EVENTS:2};let d=h.A_BEFORE_EVENTS;function f(){switch(d){case h.A_BEFORE_EVENTS:(t=n.indexOf(r[s]))>0&&(0===s&&(i=n.substring(0,t)),n=n.substr(t+r[s].length),d=h.B_IN_EVENTS,m());break;case h.B_IN_EVENTS:m();break;default:i+=n,n=""}var t}function m(){for(;u<n.length&&d===h.B_IN_EVENTS;)if(c)c=!1,u++;else{switch(n.charCodeAt(u)){case 93:if(0===o){if(0!==u)throw new Error("Found trailling ] in mid-course");if(0===s&&e)return d=h.A_BEFORE_EVENTS,void(s=1);{d=h.D_AFTER_EVENTS;let t="";1===s&&(t='"eventDeletionsCount":'+p+","),n=t+'"eventsCount":'+l+n.substr(1)}}break;case 92:c=!0;break;case 123:a||o++;break;case 34:a=!a;break;case 125:if(a||o--,0===o){const e=44===n.charCodeAt(0)?1:0,i=n.substring(e,u+1);0===s?l++:p++,n=n.substr(u+1),r=i,t(JSON.parse(r)),u=-1}}u++}var r}return function(t,e){t.setEncoding("utf8"),t.on("data",t=>{n+=t,f()}),t.on("end",()=>{let r,s;try{t.text=i+n,s=t.text&&JSON.parse(t.text)}catch(e){(r=e).rawResponse=t.text||null,r.statusCode=t.statusCode}finally{e(r,s)}})}}},u7Qr:function(t,e,r){"use strict";function s(t){"@babel/helpers - typeof";return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n=r("IA4a");function i(t){if(t)return function(t){for(var e in i.prototype)Object.prototype.hasOwnProperty.call(i.prototype,e)&&(t[e]=i.prototype[e]);return t}(t)}t.exports=i,i.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),clearTimeout(this._uploadTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,delete this._uploadTimeoutTimer,this},i.prototype.parse=function(t){return this._parser=t,this},i.prototype.responseType=function(t){return this._responseType=t,this},i.prototype.serialize=function(t){return this._serializer=t,this},i.prototype.timeout=function(t){if(!t||"object"!==s(t))return this._timeout=t,this._responseTimeout=0,this._uploadTimeout=0,this;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))switch(e){case"deadline":this._timeout=t.deadline;break;case"response":this._responseTimeout=t.response;break;case"upload":this._uploadTimeout=t.upload;break;default:console.warn("Unknown timeout option",e)}return this},i.prototype.retry=function(t,e){return 0!==arguments.length&&!0!==t||(t=1),t<=0&&(t=0),this._maxRetries=t,this._retries=0,this._retryCallback=e,this};var o=["ECONNRESET","ETIMEDOUT","EADDRINFO","ESOCKETTIMEDOUT"];i.prototype._shouldRetry=function(t,e){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{var r=this._retryCallback(t,e);if(!0===r)return!0;if(!1===r)return!1}catch(t){console.error(t)}if(e&&e.status&&e.status>=500&&501!==e.status)return!0;if(t){if(t.code&&o.includes(t.code))return!0;if(t.timeout&&"ECONNABORTED"===t.code)return!0;if(t.crossDomain)return!0}return!1},i.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=!1,this.timedout=!1,this.timedoutError=null,this._end()},i.prototype.then=function(t,e){var r=this;if(!this._fullfilledPromise){var s=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises"),this._fullfilledPromise=new Promise(function(t,e){s.on("abort",function(){if(!(r._maxRetries&&r._maxRetries>r._retries))if(r.timedout&&r.timedoutError)e(r.timedoutError);else{var t=new Error("Aborted");t.code="ABORTED",t.status=r.status,t.method=r.method,t.url=r.url,e(t)}}),s.end(function(r,s){r?e(r):t(s)})})}return this._fullfilledPromise.then(t,e)},i.prototype.catch=function(t){return this.then(void 0,t)},i.prototype.use=function(t){return t(this),this},i.prototype.ok=function(t){if("function"!=typeof t)throw new Error("Callback required");return this._okCallback=t,this},i.prototype._isResponseOK=function(t){return!!t&&(this._okCallback?this._okCallback(t):t.status>=200&&t.status<300)},i.prototype.get=function(t){return this._header[t.toLowerCase()]},i.prototype.getHeader=i.prototype.get,i.prototype.set=function(t,e){if(n(t)){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&this.set(r,t[r]);return this}return this._header[t.toLowerCase()]=e,this.header[t]=e,this},i.prototype.unset=function(t){return delete this._header[t.toLowerCase()],delete this.header[t],this},i.prototype.field=function(t,e){if(null===t||void 0===t)throw new Error(".field(name, val) name can not be empty");if(this._data)throw new Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(n(t)){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&this.field(r,t[r]);return this}if(Array.isArray(e)){for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&this.field(t,e[s]);return this}if(null===e||void 0===e)throw new Error(".field(name, val) val can not be empty");return"boolean"==typeof e&&(e=String(e)),this._getFormData().append(t,e),this},i.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)},i.prototype._auth=function(t,e,r,s){switch(r.type){case"basic":this.set("Authorization","Basic ".concat(s("".concat(t,":").concat(e))));break;case"auto":this.username=t,this.password=e;break;case"bearer":this.set("Authorization","Bearer ".concat(t))}return this},i.prototype.withCredentials=function(t){return void 0===t&&(t=!0),this._withCredentials=t,this},i.prototype.redirects=function(t){return this._maxRedirects=t,this},i.prototype.maxResponseSize=function(t){if("number"!=typeof t)throw new TypeError("Invalid argument");return this._maxResponseSize=t,this},i.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}},i.prototype.send=function(t){var e=n(t),r=this._header["content-type"];if(this._formData)throw new Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(e&&!this._data)Array.isArray(t)?this._data=[]:this._isHost(t)||(this._data={});else if(t&&this._data&&this._isHost(this._data))throw new Error("Can't merge these send calls");if(e&&n(this._data))for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(this._data[s]=t[s]);else"string"==typeof t?(r||this.type("form"),r=this._header["content-type"],this._data="application/x-www-form-urlencoded"===r?this._data?"".concat(this._data,"&").concat(t):t:(this._data||"")+t):this._data=t;return!e||this._isHost(t)?this:(r||this.type("json"),this)},i.prototype.sortQuery=function(t){return this._sort=void 0===t||t,this},i.prototype._finalizeQueryString=function(){var t=this._query.join("&");if(t&&(this.url+=(this.url.includes("?")?"&":"?")+t),this._query.length=0,this._sort){var e=this.url.indexOf("?");if(e>=0){var r=this.url.slice(e+1).split("&");"function"==typeof this._sort?r.sort(this._sort):r.sort(),this.url=this.url.slice(0,e)+"?"+r.join("&")}}},i.prototype._appendQueryString=function(){console.warn("Unsupported")},i.prototype._timeoutError=function(t,e,r){if(!this._aborted){var s=new Error("".concat(t+e,"ms exceeded"));s.timeout=e,s.code="ECONNABORTED",s.errno=r,this.timedout=!0,this.timedoutError=s,this.abort(),this.callback(s)}},i.prototype._setTimeouts=function(){var t=this;this._timeout&&!this._timer&&(this._timer=setTimeout(function(){t._timeoutError("Timeout of ",t._timeout,"ETIME")},this._timeout)),this._responseTimeout&&!this._responseTimeoutTimer&&(this._responseTimeoutTimer=setTimeout(function(){t._timeoutError("Response timeout of ",t._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},udG1:function(t,e,r){const s=r("o951"),n=r("kZww"),i=r("upOG"),o=(r("OkFM"),r("cTpx")),a=r("zp3n");t.exports=class{constructor(t,e){this.authSettings=t,this.service=e,this.serviceInfo=e.infoSync()}async init(){var t;return(t=this).loginButtonSpan=document.getElementById(t.authSettings.spanButtonID),t.loginButtonSpan?(t.loginButtonText=t.loginButtonSpan,t.loginButtonSpan.addEventListener("click",t.onClick.bind(t))):console.log("WARNING: Pryv.Browser initialized with no spanButtonID"),this.languageCode=this.authSettings.authRequest.languageCode||"en",this.messages=o(this.languageCode),this.loginButtonText&&await async function(t){const e=await t.service.assets();t.loginButtonSpan.innerHTML=await e.loginButtonGetHTML(),t.loginButtonText=document.getElementById("pryv-access-btn-text")}(this),this._cookieKey="pryv-libjs-"+this.authSettings.authRequest.requestingAppId,this.auth=new i(this.authSettings,this.service,this),await this.auth.init(),this.auth.messages,this.service}onClick(){this.auth.handleClick()}async onStateChange(t){switch(t.status){case n.LOADING:this.text=this.messages.LOADING;break;case n.INITIALIZED:this.text=function(t,e){return t.messages.LOGIN+": "+e}(this,this.serviceInfo.name);break;case n.NEED_SIGNIN:const e=t.authUrl||t.url;if(this.authSettings.authRequest.returnURL)return void(location.href=e);!async function(t,e){let r=void 0!==window.screenX?window.screenX:window.screenLeft,s=void 0!==window.screenY?window.screenY:window.screenTop,n=void 0!==window.outerWidth?window.outerWidth:document.body.clientWidth,i=void 0!==window.outerHeight?window.outerHeight:document.body.clientHeight-22,o=parseInt(r+(n-400)/2,10),a=parseInt(s+(i-620)/2.5,10),c="width=400,height=620,left="+o+",top="+a+",scrollbars=yes";t.popup=window.open(e,"prYv Sign-in",c),t.popup?window.focus&&t.popup.focus():t.auth.stopAuthRequest("FAILED_TO_OPEN_WINDOW")}(this,e);break;case n.AUTHORIZED:this.text=t.username,this.saveAuthorizationData({apiEndpoint:t.apiEndpoint,username:t.username});break;case n.SIGNOUT:const r=this.messages.SIGNOUT_CONFIRM?this.messages.SIGNOUT_CONFIRM:"Logout ?";confirm(r)&&(this.deleteAuthorizationData(),this.auth.init());break;case n.ERROR:this.text=function(t,e){return t.messages.ERROR+": "+e}(this,t.message);break;default:console.log("WARNING Unhandled state for Login: "+t.status)}this.loginButtonText&&(this.loginButtonText.innerHTML=this.text)}getAuthorizationData(){return s.get(this._cookieKey)}saveAuthorizationData(t){s.set(this._cookieKey,t)}async deleteAuthorizationData(){s.del(this._cookieKey)}async finishAuthProcessAfterRedirection(t){if(!a.isBrowser())return;let e=function(e){const r=a.getQueryParamsFromURL(e);let s=null;return r.prYvkey&&(s=t.serviceInfo.access+r.prYvkey),r.prYvpoll&&(s=r.prYvpoll),s}(window.location.href);if(null!==e)try{const r=await a.superagent.get(e);t.state=r.body}catch(e){t.state={status:n.ERROR,message:"Cannot fetch result",error:e}}}}},upOG:function(t,e,r){const s=r("zp3n"),n=(r("OkFM"),r("kZww")),i=r("cTpx");t.exports=class{constructor(t,e,r){this.settings=t,function(t){if(!t)throw new Error("settings cannot be null");if(!t.authRequest)throw new Error("Missing settings.authRequest");if(t.authRequest.returnURL=this.getReturnURL(t.authRequest.returnURL),!t.authRequest.requestingAppId)throw new Error("Missing settings.authRequest.requestingAppId");if(!t.authRequest.requestedPermissions)throw new Error("Missing settings.authRequest.requestedPermissions")}.call(this,t),this.stateChangeListeners=[],this.settings.onStateChange&&this.stateChangeListeners.push(this.settings.onStateChange),this.service=e,this.languageCode=this.settings.authRequest.languageCode||"en",this.messages=i(this.languageCode),this.loginButton=r}async init(){this.serviceInfo=this.service.infoSync(),this.state={status:n.LOADING},this.assets=await async function(t){let e={};try{if(e=await t.service.assets(),"undefined"!=typeof location){await e.loginButtonLoadCSS();const r=await e.loginButtonGetMessages();r.LOADING?t.messages=i(t.languageCode,r):console.log("WARNING Messages cannot be loaded using defaults: ",r)}}catch(e){throw t.state={status:n.ERROR,message:"Cannot fetch button visuals",error:e},e}return e}(this);const t=this.loginButton;return null!=t&&(this.stateChangeListeners.push(t.onStateChange.bind(t)),await async function(t){const e=t.loginButton;if(null==e)return;const r=await e.getAuthorizationData();null!=r&&(t.state=Object.assign({},{status:n.AUTHORIZED},r))}(this)),this.state.status!=n.AUTHORIZED&&(this.state={status:n.INITIALIZED,serviceInfo:this.serviceInfo}),null!=t&&null!=t.finishAuthProcessAfterRedirection&&await t.finishAuthProcessAfterRedirection(this),this.service}stopAuthRequest(t){this.state={status:n.ERROR,message:t}}async handleClick(){!function(){return this.state.status==n.AUTHORIZED}.call(this)?function(){return this.state.status===n.INITIALIZED}.call(this)?this.startAuthRequest():function(){return this.state.status===n.NEED_SIGNIN}.call(this)?this.state=this.state:console.log('Unhandled action in "handleClick()" for status:',this.state.status):this.state={status:n.SIGNOUT}}getReturnURL(t,e,r){const n="auto";let i=(t=t||n+"#").slice(-1);if("#&?".indexOf(i)<0)throw new Error('Pryv access: Last character of --returnURL setting-- is not "?", "&" or "#": '+t);return!(o(t)&&!s.browserIsMobileOrTablet(r))&&((o(t)&&s.browserIsMobileOrTablet(r)||0===t.indexOf("self"))&&(t=(e||window.location.href)+t.substring(4)),s.cleanURLFromPrYvParams(t));function o(t){return 0===t.indexOf(n)}}async startAuthRequest(){this.state=await async function(){try{const t=await s.superagent.post(this.serviceInfo.access).send(this.settings.authRequest);return t.body}catch(t){throw this.state={status:n.ERROR,message:"Requesting access",error:t},t}}.call(this),await async function t(){if(this.state.status!==n.NEED_SIGNIN)return;const e=await async function(t){try{const e=await s.superagent.get(t);return e.body}catch(t){return t.response&&403===t.response.status&&t.response.body&&"REFUSED"===t.response.body.status?{status:n.INITIALIZED}:{status:n.ERROR,message:"Error while polling for auth request",error:t}}}(this.state.poll);e.status===n.NEED_SIGNIN?setTimeout(await t.bind(this),this.state.poll_rate_ms):this.state=e}.call(this)}set state(t){t.id=t.status,this._state=t,this.stateChangeListeners.map(t=>{try{t(this.state)}catch(t){console.log("Error during set state ()",t)}})}get state(){return this._state}}},vYrD:function(t,e){},zp3n:function(t,e,r){const s=/(.+):\/\/(.+)@(.+)/gm,n=/(.+):\/\/(.+)/gm,i={superagent:r("eARU"),isBrowser:function(){return"undefined"!=typeof window&&"undefined"!=typeof document},extractTokenAndApiEndpoint:function(t){s.lastIndex=0;const e=s.exec(t);if(null!==e)return e[3].endsWith("/")||(e[3]+="/"),{endpoint:e[1]+"://"+e[3],token:e[2]};n.lastIndex=0;const r=n.exec(t);if(null===r)throw new Error("Cannot find endpoint, invalid URL format");return r[2].endsWith("/")||(r[2]+="/"),{endpoint:r[1]+"://"+r[2],token:null}},buildPryvApiEndpoint:function(t){if(!t.token){let e=t.endpoint+"";return t.endpoint.endsWith("/")||(e+="/"),e}n.lastIndex=0;let e=n.exec(t.endpoint);return e[2].endsWith("/")||(e[2]+="/"),e[1]+"://"+t.token+"@"+e[2]},browserIsMobileOrTablet:function(t){if(null==t)return!1;let e=!1;var r;return r=t.userAgent||t.vendor||t.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(e=!0),e},cleanURLFromPrYvParams:function(t){return t.replace(/[?#&]+prYv([^=&]+)=([^&]*)/g,"")},getQueryParamsFromURL:function(t){let e={};return t.replace(/[?#&]+([^=&]+)=([^&]*)/g,function(t,r,s){e[r]=decodeURIComponent(s)}),e}};t.exports=i}},["NHnr"]);
//# sourceMappingURL=app.d63ff6daf36f902ddfdc.js.map